// Import global styles, assuming 'index' defines mixins like text-style-secondary
@use 'index' as *;

// Base styles for the main navigation container
.header-container {
  position: relative; // Needed for absolute positioning of hamburger/mobile menu
  height: 50px; // Maintain height for desktop nav
  display: flex;
  justify-content: center;
  align-items: center;
  border-bottom: 1px outset #fff;
  background-color: #121212;
  // background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
}

// Styles for the desktop navigation bar
.navbar {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 50px;
  width: 100%; // Occupy full width
}

// Styles for individual links in the desktop navbar
.navbar a {
  @include text-style-secondary(1rem, 1.25rem, 1.7, 700);
  color: #fff;
  padding: 0 clamp(1rem, 6vw, 4.5rem);
  box-sizing: border-box;
  border: 2px solid transparent; // Reserve space for border
  transition: background-color 0.3s ease, color 0.3s ease;
  text-decoration: none;
  display: flex;
  align-items: center;
  height: 50px;
  line-height: 1.5; // Vertical centering for single-line text
}

// Styles for dropdown containers in the desktop navbar
.dropdown {
  float: left; // Allows items to sit next to each other
  overflow: visible; // Ensure dropdown content is not clipped by this container
  position: relative; // Important: Make .dropdown the positioning context for .dropdown-content
}

// Styles for the button that triggers a dropdown in desktop view
.dropdown .dropbtn {
  @include text-style-secondary(1rem, 1.25rem, 1.7, 700);
  display: flex;
  align-items: center;
  gap: 0.25rem; // Space between text and chevron
  border: none;
  outline: none;
  color: #fff;
  padding: 0 clamp(1rem, 6vw, 4.5rem);
  background-color: inherit; // Inherits background from parent .navbar
  margin: 0;
  height: 50px;
  line-height: 1.5;
  transition: background-color 0.3s ease, color 0.3s ease;
  cursor: pointer; // Indicate interactivity
}

// Styles for the chevron icon within dropdown buttons
.chevron-icon {
  transition: transform 0.3s ease; // Smooth rotation
  font-size: 0.75rem;
  transform-origin: center; // Ensures rotation is around its center
  position: relative;
  top: 1px; // Slight vertical adjustment
}

// Rotate chevron icon when dropdown is hovered
.dropdown:hover .chevron-icon {
  transform: rotate(180deg);
}

// Hover effects for desktop navbar links and dropdown buttons
.navbar a:hover,
.dropdown:hover .dropbtn {
  background-color: #fff;
  color: #000;
}

// Styles for the dropdown content (submenu) in desktop view
.dropdown-content {
  display: none; // Hidden by default
  position: absolute; // Positions relative to the nearest positioned ancestor (.dropdown)
  top: 100%; // Position below the dropdown button
  left: 0; // Align with the left edge of the dropdown button
  background-color: rgba(255, 255, 255, 0.98); // Slightly transparent white
  min-width: 200px; // Minimum width for dropdown
  width: auto; // Adjusts to content width
  box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2); // Soft shadow
  z-index: 2; // Ensures it appears above other content
  border-top-right-radius: 8px;
  border-bottom-right-radius: 8px;
  border-bottom-left-radius: 8px;
  /* Removed border-top-left-radius: 8px; as per your request */
}

// Styles for individual links within the desktop dropdown content
.dropdown-content a {
  @include text-style-secondary(1rem, 1.25rem, 1.7, 700);
  display: block; // Each link takes its own line
  width: 100%; // Make link fill the full width of its parent
  text-align: left;
  text-decoration: none;
  color: #000;
  box-sizing: border-box;
  background-color: transparent;
  transition: background-color 0.3s ease, color 0.3s ease;
  border: 0 solid transparent;
  margin: 0;
  line-height: 50px; // Vertically centers single-line text
  padding: 0 16px;
  white-space: nowrap; /* Prevent text from wrapping */
  overflow: hidden; /* Hide overflowed text */
  text-overflow: ellipsis; /* Add ellipsis for overflowed text */
}

// Rounded corners for the first and last items in the desktop dropdown
.dropdown-content a:first-child {
  border-top-right-radius: 8px;
  /* Removed border-top-left-radius: 8px; as per your request */
}

.dropdown-content a:last-child {
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}

// Hover effect for links within the desktop dropdown content
.dropdown-content a:hover {
  // background: linear-gradient(to right, rgba(74, 144, 226, 0.3), rgba(80, 227, 194, 0.3));
  background-color: rgba(0, 0, 0, 0.1);
  color: #000;
}

// Display dropdown content when the parent dropdown is hovered
.dropdown:hover .dropdown-content {
  display: block;
}

// Hamburger Icon (Mobile Specific)
.hamburger-icon {
  display: none; // Hidden by default on desktop
  position: absolute;
  top: 12px; // Adjust position as needed
  left: 15px; // Adjust position as needed
  z-index: 1001; // Ensure it's above other content
  background: none;
  border: none;
  cursor: pointer;
  flex-direction: column;
  justify-content: space-around;
  width: 30px;
  height: 25px;
  padding: 0;
  transition: transform 0.3s ease; // Smooth transition for icon itself

  .bar {
    width: 100%;
    height: 3px;
    background-color: #fff; // Color of the bars
    border-radius: 5px;
    transition: all 0.3s ease-in-out; // Smooth transition for individual bars
    transform-origin: center; /* Ensure transformations are from the center */
  }

  &.open {
    // Transform into an 'X'
    .top-bar {
      transform: translateY(11px) rotate(45deg); // Move down and rotate
    }
    .middle-bar {
      opacity: 0; // Hide the middle bar
    }
    .bottom-bar {
      transform: translateY(-6px) rotate(-45deg); // Move up and rotate
    }
  }
}

// Mobile Menu Overlay
.mobile-menu {
  display: none; // Hidden by default on desktop
  position: fixed; // Fixed position to cover the viewport
  top: 0;
  left: 0;
  width: 80%; // Occupy 80% of the screen width
  max-width: 300px; // Max width for larger mobile/small tablet screens
  height: 100%; // Full viewport height
  background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
  box-shadow: 2px 0 10px rgba(0,0,0,0.3); // Shadow for depth
  transform: translateX(-100%); // Start off-screen to the left
  transition: transform 0.4s ease-in-out; // Smooth slide-in animation
  z-index: 1000; // Ensures it's above main content but below hamburger icon
  overflow-y: auto; // Enable scrolling if menu content is long
  padding-top: 60px; // Space for the hamburger/close button at the top
}

// Class to open the mobile menu
.mobile-menu.open {
  transform: translateX(0); // Slide into view
  box-shadow: 1px 0px 4px rgba(0, 0, 0, 0.4);
}

// Content wrapper for mobile menu items
.mobile-menu-content {
  display: flex;
  flex-direction: column; // Stack items vertically
  padding: 20px;
}

// Styles for mobile dropdown containers and single links
.mobile-dropdown, .mobile-menu-content > a {
  width: 100%;
  margin-bottom: 10px; // Space between items
  border-radius: 8px;
  overflow: hidden; // Ensures rounded corners for dropdown content
}

// Styles for buttons that trigger mobile dropdowns and single links
.mobile-dropbtn, .mobile-menu-content > a {
  @include text-style-secondary(1.1rem, 1.5rem, 1.7, 700);
  color: #000;
  background-color: rgba(255, 255, 255, 0.2); // Lighter background for menu items
  padding: 15px 20px;
  display: flex;
  justify-content: space-between; // Space out text and chevron
  align-items: center;
  width: 100%;
  border: none;
  text-align: left;
  cursor: pointer;
  transition: background-color 0.3s ease;
  text-decoration: none; // Remove underline for links

  &:hover {
    background-color: rgba(255, 255, 255, 0.4); // Darken on hover
  }
}

// Styles for the mobile dropdown content (submenu)
.mobile-dropdown-content {
  display: flex; // Use flexbox for vertical stacking
  flex-direction: column;
  background-color: rgba(0, 0, 0, 0.1); // Slightly darker background for sub-items
  padding-left: 20px; // Indent sub-items
  max-height: 0; // Start with 0 height for slide-down animation
  overflow: hidden; // Hide overflow during animation
  transition: max-height 0.4s ease-in-out; // Smooth slide-down animation
}

// Class to open the mobile dropdown content
.mobile-dropdown-content.open {
  max-height: 500px; // Arbitrary large value to allow content to show fully
}

// Styles for individual links within the mobile dropdown content
.mobile-dropdown-content a {
  @include text-style-secondary(1rem, 1.4rem, 1.7, 500); // Slightly smaller/lighter font
  color: #000;
  padding: 10px 0;
  text-decoration: none;
  display: block;
  transition: background-color 0.3s ease;

  &:hover {
    background-color: rgba(0, 0, 0, 0.2); // Darken on hover
  }
}

// Rotate chevron icon for mobile dropdowns when open
.chevron-icon.rotated {
  transform: rotate(180deg);
}

// Media Query for Mobile Screens (max-width: 768px)
@media (max-width: 768px) {
  .navbar.desktop-nav {
    display: none; // Hide the desktop navigation on mobile
  }

  .hamburger-icon {
    display: flex; // Show the hamburger icon on mobile
  }

  .mobile-menu {
    display: block; // Show the mobile menu container on mobile
  }

  // Adjust header container for mobile, if needed
  .header-container {
    justify-content: flex-start; // Align hamburger to the left
    padding-left: 60px; // Make space for the hamburger icon
  }
}

// Footer bottom style (kept as is, not related to menu)
.footer__bottom {
  color: #ccc;
}
